import{a as e,_ as a}from"./index.9874402d.js";import{I as s,d as t,p as n,f as m,r as i,g as r,o as d,h as l,j as o,i as c,t as g,m as p,l as u,w as _,Z as v,_ as y,$ as h,n as f,u as k,C as b,c as x,F as I,D as M}from"./vendor.f24ab909.js";var T=t({name:"MessageItem",props:{item:{type:Object,default:{},required:!0}},methods:{getLastTimeStr:(a,s)=>e(a,s)}});n("data-v-19dd91de");const j={class:"message markdown-body"},w={class:"d-flex"},L={class:"message-hd-avatar"},N={class:"flex-1 message-hd-title"},C={key:0},H={key:1},S=["textContent"],$=["innerHTML"],q={class:"message-topic"};m(),T.render=function(e,a,s,t,n,m){const v=i("router-link"),y=r("lazy");return d(),l("section",j,[o("div",w,[c(o("img",L,null,512),[[y,e.item.author.avatar_url]]),o("p",N,[o("span",null,g(e.item.author.loginname),1),"at"===e.item.type?(d(),l("span",C,"在回复中@了您")):p("",!0),"reply"===e.item.type?(d(),l("span",H,"回复了您的话题")):p("",!0)]),o("span",{class:"message-hd-time",textContent:g(e.getLastTimeStr(e.item.reply.create_at,!0))},null,8,S)]),o("div",{class:"message-reply",innerHTML:e.item.reply.content},null,8,$),u(v,{to:{name:"Topic",params:{id:e.item.topic.id}}},{default:_((()=>[o("div",q,"话题："+g(e.item.topic.title),1)])),_:1},8,["to"])])},T.__scopeId="data-v-19dd91de";var z=t({name:"MessagePage",components:{[v.name]:v,[y.name]:y,[h.name]:h,NavHeader:a,MessageItem:T},setup(){const e=f({}),a=f("has_read_messages"),t=k(),{token:n}=t.state.user.userInfo;return b((async()=>{try{const t=await(a=n,s.get(`/messages?accesstoken=${a}`));e.value=t,console.log("message",t)}catch(t){}var a})),{message:e,activeName:a}}});z.render=function(e,a,s,t,n,m){const r=i("nav-header"),o=i("van-empty"),c=i("message-item"),g=i("van-tab"),p=i("van-tabs");return d(),l(I,null,[u(r,{title:"消息"}),u(p,{active:e.activeName,"onUpdate:active":a[0]||(a[0]=a=>e.activeName=a),swipeable:"",sticky:""},{default:_((()=>[u(g,{title:"已读消息",name:"has_read_messages"},{default:_((()=>[e.message.has_read_messages&&0===e.message.has_read_messages.length?(d(),x(o,{key:0,description:"暂无数据"})):(d(!0),l(I,{key:1},M(e.message.has_read_messages,(e=>(d(),x(c,{key:e.id,item:e},null,8,["item"])))),128))])),_:1}),u(g,{title:"未读消息",name:"hasnot_read_messages"},{default:_((()=>[e.message.hasnot_read_messages&&0===e.message.hasnot_read_messages.length?(d(),x(o,{key:0,description:"暂无数据"})):(d(!0),l(I,{key:1},M(e.message.hasnot_read_messages,(e=>(d(),x(c,{key:e.id,item:e},null,8,["item"])))),128))])),_:1})])),_:1},8,["active"])],64)};export{z as default};
