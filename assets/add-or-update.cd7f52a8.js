import{d as R,h as s,Y as I,r as n,o as d,f as p,w as u,b as o,l as i,a2 as j,ao as z,H as y,a as g,c as Y,F as G,e as J,n as Q,a7 as W,ap as X,aq as Z,ar as ee,E as le,_ as te}from"./index.afbe2883.js";const ue={class:"mod__menu-icon-inner"},oe={class:"mod__menu-icon-list"},ae=R({__name:"add-or-update",emits:["refreshDataList"],setup(ne,{expose:U,emit:x}){const m=s(!1),F=s([]),V=s([]),C=s(),f=s(),E=s(),k=s(),e=I({id:"",type:0,name:"",pid:"0",parentName:"",url:"",authority:"",sort:0,icon:"",openStyle:0}),h=a=>{m.value=!0,e.id="",f.value&&f.value.resetFields(),a?M(a):v(),A(),V.value=W()},w=()=>{A(),v()},A=()=>X(e.type).then(a=>{F.value=a.data}),M=a=>{Z(a).then(l=>{if(Object.assign(e,l.data),e.pid=="0")return v();C.value.setCurrentKey(e.pid)})},v=()=>{e.pid="0",e.parentName="\u4E00\u7EA7\u83DC\u5355"},S=a=>{e.pid=a.id,e.parentName=a.name,E.value.hide()},$=a=>{e.icon=a,k.value.hide()},H=s({name:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],parentName:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),D=()=>{f.value.validate(a=>{if(!a)return!1;ee(e).then(()=>{le.success({message:"\u64CD\u4F5C\u6210\u529F",duration:500,onClose:()=>{m.value=!1,x("refreshDataList")}})})})};return U({init:h}),(a,l)=>{const c=n("el-radio"),L=n("el-radio-group"),r=n("el-form-item"),_=n("el-input"),B=n("svg-icon"),P=n("el-tree"),N=n("el-popover"),T=n("el-input-number"),b=n("el-button"),q=n("el-form"),K=n("el-dialog");return d(),p(K,{modelValue:m.value,"onUpdate:modelValue":l[13]||(l[13]=t=>m.value=t),title:e.id?"\u4FEE\u6539":"\u65B0\u589E","close-on-click-modal":!1,draggable:""},{footer:u(()=>[o(b,{onClick:l[11]||(l[11]=t=>m.value=!1)},{default:u(()=>[i("\u53D6\u6D88")]),_:1}),o(b,{type:"primary",onClick:l[12]||(l[12]=t=>D())},{default:u(()=>[i("\u786E\u5B9A")]),_:1})]),default:u(()=>[o(q,{ref_key:"dataFormRef",ref:f,model:e,rules:H.value,"label-width":"120px",onKeyup:l[10]||(l[10]=j(t=>D(),["enter"]))},{default:u(()=>[o(r,{prop:"type",label:"\u7C7B\u578B"},{default:u(()=>[o(L,{modelValue:e.type,"onUpdate:modelValue":l[0]||(l[0]=t=>e.type=t),disabled:!!e.id,onChange:l[1]||(l[1]=t=>w())},{default:u(()=>[o(c,{label:0},{default:u(()=>[i("\u83DC\u5355")]),_:1}),o(c,{label:1},{default:u(()=>[i("\u6309\u94AE")]),_:1}),o(c,{label:2},{default:u(()=>[i("\u63A5\u53E3")]),_:1})]),_:1},8,["modelValue","disabled"])]),_:1}),o(r,{prop:"name",label:"\u540D\u79F0"},{default:u(()=>[o(_,{modelValue:e.name,"onUpdate:modelValue":l[2]||(l[2]=t=>e.name=t),placeholder:"\u540D\u79F0"},null,8,["modelValue"])]),_:1}),o(r,{prop:"parentName",label:"\u4E0A\u7EA7\u83DC\u5355",class:"popover-list"},{default:u(()=>[o(N,{ref_key:"menuListPopover",ref:E,placement:"bottom-start",trigger:"click",width:400},{reference:u(()=>[o(_,{modelValue:e.parentName,"onUpdate:modelValue":l[4]||(l[4]=t=>e.parentName=t),readonly:!0,placeholder:"\u4E0A\u7EA7\u83DC\u5355"},{suffix:u(()=>[e.pid!=="0"?(d(),p(B,{key:0,icon:"icon-close-circle",onClick:l[3]||(l[3]=z(t=>v(),["stop"]))})):y("",!0)]),_:1},8,["modelValue"])]),default:u(()=>[g("div",null,[o(P,{ref_key:"menuListTree",ref:C,data:F.value,props:{label:"name",children:"children"},"node-key":"id","highlight-current":!0,"expand-on-click-node":!1,accordion:"",onCurrentChange:S},null,8,["data"])])]),_:1},512)]),_:1}),e.type===0?(d(),p(r,{key:0,prop:"url",label:"\u8DEF\u7531"},{default:u(()=>[o(_,{modelValue:e.url,"onUpdate:modelValue":l[5]||(l[5]=t=>e.url=t),placeholder:"\u8DEF\u7531"},null,8,["modelValue"])]),_:1})):y("",!0),o(r,{prop:"sort",label:"\u6392\u5E8F"},{default:u(()=>[o(T,{modelValue:e.sort,"onUpdate:modelValue":l[6]||(l[6]=t=>e.sort=t),"controls-position":"right",min:0,label:"\u6392\u5E8F"},null,8,["modelValue"])]),_:1}),e.type===0?(d(),p(r,{key:1,prop:"openStyle",label:"\u6253\u5F00\u65B9\u5F0F"},{default:u(()=>[o(L,{modelValue:e.openStyle,"onUpdate:modelValue":l[7]||(l[7]=t=>e.openStyle=t)},{default:u(()=>[o(c,{label:0},{default:u(()=>[i("\u5185\u90E8\u6253\u5F00")]),_:1}),o(c,{label:1},{default:u(()=>[i("\u5916\u90E8\u6253\u5F00")]),_:1})]),_:1},8,["modelValue"])]),_:1})):y("",!0),o(r,{prop:"authority",label:"\u6388\u6743\u6807\u8BC6"},{default:u(()=>[o(_,{modelValue:e.authority,"onUpdate:modelValue":l[8]||(l[8]=t=>e.authority=t),placeholder:"\u591A\u4E2A\u7528\u9017\u53F7\u5206\u9694\uFF0C\u5982\uFF1Asys:menu:save,sys:menu:update"},null,8,["modelValue"])]),_:1}),e.type===0?(d(),p(r,{key:2,prop:"icon",label:"\u56FE\u6807",class:"popover-list"},{default:u(()=>[o(N,{ref_key:"iconListPopover",ref:k,placement:"top-start",trigger:"click",width:470,"popper-class":"mod__menu-icon-popover"},{reference:u(()=>[o(_,{modelValue:e.icon,"onUpdate:modelValue":l[9]||(l[9]=t=>e.icon=t),readonly:!0,placeholder:"\u56FE\u6807"},null,8,["modelValue"])]),default:u(()=>[g("div",ue,[g("div",oe,[(d(!0),Y(G,null,J(V.value,(t,O)=>(d(),p(b,{key:O,class:Q({"is-active":e.icon===t}),onClick:re=>$(t)},{default:u(()=>[o(B,{icon:t},null,8,["icon"])]),_:2},1032,["class","onClick"]))),128))])])]),_:1},512)]),_:1})):y("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])}}});const de=te(ae,[["__scopeId","data-v-8dbea392"]]);export{de as default};
