import{a as e,e as t,_ as a}from"./index.9874402d.js";import{d as s,u as n,k as r,p as i,f as l,g as c,o,h as u,i as m,j as d,a0 as p,t as v,Z as f,_ as g,$ as y,b as _,n as k,C as h,T as x,B as b,r as j,l as w,m as C,w as I,c as T,F as L,D as N}from"./vendor.f24ab909.js";import{b as S,c as U}from"./user.76ae5e62.js";var $=s({name:"RecentItem",props:{item:{type:Object,default:{},required:!0}},methods:{getLastTimeStr:(t,a)=>e(t,a)},setup(){const e=n(),a=r();return{goDetail:s=>{a.push(`/topic/${s.id}`),e.dispatch(`topic/${t}`,{id:s.id,token:e.state.user.userInfo.token})},goUser:e=>{a.push(`/user/${e.author.loginname}`)}}}});i("data-v-5786ed62");const D={class:"d-flex flex-column justify-content-between flex-1 recent-wrap"},z={class:"text-ellipsis recent-title"},R={class:"d-flex align-items-center justify-content-between"},q={class:"recent-loginname"},B={class:"recent-time"};l(),$.render=function(e,t,a,s,n,r){const i=c("lazy");return o(),u("section",{class:"d-flex recent",onClick:t[1]||(t[1]=t=>e.goDetail(e.item))},[m(d("img",{class:"recent-avatar",onClick:t[0]||(t[0]=p((t=>e.goUser(e.item)),["stop"]))},null,512),[[i,e.item.author.avatar_url]]),d("div",D,[d("div",z,v(e.item.title),1),d("div",R,[d("span",q,v(e.item.author.loginname),1),d("span",B,v(e.getLastTimeStr(e.item.last_reply_at,!0)),1)])])])},$.__scopeId="data-v-5786ed62";var F=s({name:"UserPage",components:{[f.name]:f,[g.name]:g,[y.name]:y,NavHeader:a,RecentItem:$},methods:{getLastTimeStr:(t,a)=>e(t,a)},setup(){const e=_(),t=r(),a=k({}),s=k({}),n=k("replies");h((()=>{l(),i()}));const i=async()=>{var a;const n=null==(a=e.params)?void 0:a.loginname;if(!n)return x("缺少用户名参数"),void t.replace("/");const r=await S(n);s.value=r},l=async()=>{var s;const n=null==(s=e.params)?void 0:s.loginname;if(!n)return x("缺少用户名参数"),void t.replace("/");const r=await U(n);a.value=r};return b((()=>e.params),(()=>{var t;(null==(t=e.params)?void 0:t.loginname)&&(l(),i())})),{activeName:n,user:a,collects:s}}});i("data-v-2287ce97");const H={class:"d-flex flex-column align-items-center userinfo"},O={class:"userinfo-avatar"},P={class:"userinfo-name"},Z={class:"d-flex align-items-center justify-content-around w-100"},A=["textContent"],E={key:1,class:"userinfo-score"};l(),F.render=function(e,t,a,s,n,r){const i=j("nav-header"),l=j("van-empty"),p=j("recent-item"),f=j("van-tab"),g=j("van-tabs"),y=c("lazy");return o(),u(L,null,[w(i,{title:"用户信息"}),d("section",H,[m(d("img",O,null,512),[[y,e.user.avatar_url]]),d("p",P,v(e.user.loginname),1),d("div",Z,[e.user.create_at?(o(),u("span",{key:0,textContent:v(e.getLastTimeStr(e.user.create_at,!1))},null,8,A)):C("",!0),e.user.score?(o(),u("span",E,"积分: "+v(e.user.score),1)):C("",!0)])]),w(g,{active:e.activeName,"onUpdate:active":t[0]||(t[0]=t=>e.activeName=t),swipeable:"",sticky:""},{default:I((()=>[w(f,{title:"最近回复",name:"replies"},{default:I((()=>[e.user.recent_replies&&0===e.user.recent_replies.length?(o(),T(l,{key:0,description:"暂无数据"})):(o(!0),u(L,{key:1},N(e.user.recent_replies,(e=>(o(),T(p,{key:e.id,item:e},null,8,["item"])))),128))])),_:1}),w(f,{title:"最新发布",name:"topics"},{default:I((()=>[e.user.recent_topics&&0===e.user.recent_topics.length?(o(),T(l,{key:0,description:"暂无数据"})):(o(!0),u(L,{key:1},N(e.user.recent_topics,(e=>(o(),T(p,{key:e.id,item:e},null,8,["item"])))),128))])),_:1}),w(f,{title:"用户收藏",name:"collects"},{default:I((()=>[e.collects&&0===e.collects.length?(o(),T(l,{key:0,description:"暂无数据"})):(o(!0),u(L,{key:1},N(e.collects,(e=>(o(),T(p,{key:e.id,item:e},null,8,["item"])))),128))])),_:1})])),_:1},8,["active"])],64)},F.__scopeId="data-v-2287ce97";export{F as default};
