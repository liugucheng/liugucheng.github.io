import{d as S,Y as A,h as f,ae as K,r as a,W as D,o as r,f as d,w as e,b as t,a2 as j,k as u,l as s,X as _,H as W,_ as X}from"./index.491d38c7.js";import{_ as Y}from"./add-or-update.vue_vue_type_script_setup_true_lang.c693d380.js";import{_ as G}from"./data-scope.vue_vue_type_script_setup_true_lang.01fbad96.js";import{_ as J}from"./user.vue_vue_type_script_setup_true_lang.069d4a05.js";import"./role.cbddc5c7.js";import"./orgs.66e5bb82.js";const M=S({name:"SysRoleIndex"}),P=S({...M,setup(Q){const o=A({dataListUrl:"/sys/role/page",deleteUrl:"/sys/role",queryForm:{name:""}}),h=f(),w=p=>{h.value.init(p)},k=f(),g=f(!1),b=f(),F=f(),V=(p,n)=>{p==="dataScope"?k.value.init(n.id):p==="user"&&(b.value=n.id,F.value="\u5206\u914D\u7528\u6237 - "+n.name,g.value=!0)},{getDataList:C,selectionChangeHandle:$,sizeChangeHandle:E,currentChangeHandle:L,deleteBatchHandle:x}=K(o);return(p,n)=>{const R=a("el-input"),y=a("el-form-item"),i=a("el-button"),U=a("el-form"),c=a("el-table-column"),z=a("el-dropdown-item"),B=a("el-dropdown-menu"),H=a("el-dropdown"),q=a("el-table"),I=a("el-pagination"),N=a("el-drawer"),O=a("el-card"),m=D("auth"),T=D("loading");return r(),d(O,null,{default:e(()=>[t(U,{inline:!0,model:o.queryForm,onKeyup:n[4]||(n[4]=j(l=>u(C)(),["enter"]))},{default:e(()=>[t(y,null,{default:e(()=>[t(R,{modelValue:o.queryForm.name,"onUpdate:modelValue":n[0]||(n[0]=l=>o.queryForm.name=l),placeholder:"\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1}),t(y,null,{default:e(()=>[t(i,{onClick:n[1]||(n[1]=l=>u(C)())},{default:e(()=>[s("\u67E5\u8BE2")]),_:1})]),_:1}),t(y,null,{default:e(()=>[_((r(),d(i,{type:"primary",onClick:n[2]||(n[2]=l=>w())},{default:e(()=>[s("\u65B0\u589E")]),_:1})),[[m,"sys:role:save"]])]),_:1}),t(y,null,{default:e(()=>[_((r(),d(i,{type:"danger",onClick:n[3]||(n[3]=l=>u(x)())},{default:e(()=>[s("\u5220\u9664")]),_:1})),[[m,"sys:role:delete"]])]),_:1})]),_:1},8,["model"]),_((r(),d(q,{data:o.dataList,border:"",style:{width:"100%"},onSelectionChange:u($)},{default:e(()=>[t(c,{type:"selection","header-align":"center",align:"center",width:"50"}),t(c,{prop:"name",label:"\u540D\u79F0","header-align":"center",align:"center"}),t(c,{prop:"remark",label:"\u5907\u6CE8","header-align":"center",align:"center"}),t(c,{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4","header-align":"center",align:"center",width:"180"}),t(c,{label:"\u64CD\u4F5C",fixed:"right","header-align":"center",align:"center",width:"200"},{default:e(l=>[_((r(),d(i,{type:"primary",link:"",onClick:v=>w(l.row.id)},{default:e(()=>[s("\u4FEE\u6539")]),_:2},1032,["onClick"])),[[m,"sys:role:update"]]),_((r(),d(i,{type:"primary",link:"",onClick:v=>u(x)(l.row.id)},{default:e(()=>[s("\u5220\u9664")]),_:2},1032,["onClick"])),[[m,"sys:role:delete"]]),_((r(),d(H,{onCommand:v=>V(v,l.row)},{dropdown:e(()=>[t(B,null,{default:e(()=>[t(z,{command:"dataScope"},{default:e(()=>[s("\u6570\u636E\u6743\u9650")]),_:1}),t(z,{command:"user"},{default:e(()=>[s("\u5206\u914D\u7528\u6237")]),_:1})]),_:1})]),default:e(()=>[t(i,{type:"primary",class:"el-dropdown-link",link:""},{default:e(()=>[s("\u66F4\u591A")]),_:1})]),_:2},1032,["onCommand"])),[[m,"sys:role:update"]])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[T,o.dataListLoading]]),t(I,{"current-page":o.page,"page-sizes":o.pageSizes,"page-size":o.limit,total:o.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:u(E),onCurrentChange:u(L)},null,8,["current-page","page-sizes","page-size","total","onSizeChange","onCurrentChange"]),t(Y,{ref_key:"addOrUpdateRef",ref:h,onRefreshDataList:u(C)},null,8,["onRefreshDataList"]),t(G,{ref_key:"dataScopeRef",ref:k},null,512),g.value?(r(),d(N,{key:0,modelValue:g.value,"onUpdate:modelValue":n[5]||(n[5]=l=>g.value=l),title:F.value,size:1e3,"close-on-press-escape":!1},{default:e(()=>[t(J,{"role-id":b.value},null,8,["role-id"])]),_:1},8,["modelValue","title"])):W("",!0)]),_:1})}}});const oe=X(P,[["__scopeId","data-v-36e5325c"]]);export{oe as default};
